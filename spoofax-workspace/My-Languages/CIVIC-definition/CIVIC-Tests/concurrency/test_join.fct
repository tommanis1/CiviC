initialise-binding initialise-storing initialise-giving initialise-memos finalise-failing finalise-throwing multithread postpone-after-effect scope
  (bind
     ("_std",
      allocate-initialised-variable
        (environments,
         map
           ( ))),
   sequential
     (( ),
      ( ),
      scope
        (collateral
           (bind
              ("foo",
               allocate-variable
                 (functions
                    (tuples
                       ((values)*),
                     values))),
            bind
              ("main",
               allocate-variable
                 (functions
                    (tuples
                       ((values)*),
                     values)))),
         sequential
           (assign
              (bound
                 ("foo"),
               function closure
                 (scope
                    (match
                       (given,
                        tuple
                          ( )),
                     handle-return
                       (scope
                          (collateral
                             ( ),
                           sequential
                             (( ),
                              scope
                                (bind
                                   ("i",
                                    allocate-initialised-variable
                                      (integers,
                                       decimal-natural
                                         ("0"))),
                                 while
                                   (is-less
                                      (assigned
                                         (bound
                                            ("i")),
                                       decimal-natural
                                         ("5")),
                                    sequential
                                      (print
                                         (assigned
                                            (bound
                                               ("i"))),
                                       assign
                                         (bound
                                            ("i"),
                                          integer-add
                                            (assigned
                                               (bound
                                                  ("i")),
                                             decimal-natural
                                               ("1")))))))))))),
            assign
              (bound
                 ("main"),
               function closure
                 (scope
                    (match
                       (given,
                        tuple
                          ( )),
                     handle-return
                       (scope
                          (collateral
                             (bind
                                ("t",
                                 allocate-initialised-variable
                                   (values,
                                    null)),
                              ( )),
                           sequential
                             (( ),
                              assign
                                (bound
                                   ("t"),
                                 allocate-index thread-activate thread-joinable postpone-after-effect supply
                                   (assigned
                                      (bound
                                         ("foo")),
                                    tuple
                                      ( ))),
                              print
                                (decimal-natural
                                   ("11")),
                              thread-join lookup-index assigned
                                (bound
                                   ("t")),
                              print(null),
                              print
                                (decimal-natural
                                   ("10")),
                              return
                                (decimal-natural
                                   ("0")))))))),
            thread-join thread-activate thread-joinable supply
              (assigned
                 (bound
                    ("main")),
               tuple
                 ( ))))))